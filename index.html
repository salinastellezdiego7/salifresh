<!doctype html>
<html lang="es-MX">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SALIFRESH â€” Fresh Fruit, No Compromise</title>
  <meta name="description" content="SALIFRESH: Fruta fresca a domicilio en Metepec y Toluca Centro. Boxes y Premium personalizable." />

  <style>
    :root{
      --green:#1f6b4f;
      --green2:#2a8a64;
      --gold:#d7b35f;
      --gold2:#f0d184;

      --ink:#0f172a;
      --muted:#475569;
      --paper:#ffffff;
      --paper2:#f6f7f7;

      --border: rgba(15, 23, 42, .10);
      --shadow: 0 16px 36px rgba(2,6,23,.10);
      --radius: 18px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      color: var(--ink);
      background: var(--paper);
      overflow-x:hidden;
    }

    a{color:inherit; text-decoration:none}
    .container{width:min(1120px, 92vw); margin:0 auto}

    /* NAV */
    .nav{
      position:sticky; top:0; z-index:20;
      background: rgba(255,255,255,.86);
      backdrop-filter: blur(10px);
      border-bottom:1px solid var(--border);
    }
    .nav-inner{
      display:flex; align-items:center; justify-content:space-between;
      padding:12px 0; gap:12px
    }
    .brand{display:flex; align-items:center; gap:12px}
    .logoMark{
      width:44px; height:44px; border-radius:14px;
      border:1px solid rgba(215,179,95,.35);
      box-shadow: 0 10px 26px rgba(2,6,23,.10);
      display:grid; place-items:center; overflow:hidden;
      background: #fff;
    }
    .brand .name{font-weight:950; letter-spacing:.12em; color: var(--green)}
    .brand .tag{font-size:12px; color: var(--muted); font-weight:750}

    .nav-links{display:flex; gap:16px; color: var(--muted); font-weight:750; font-size:14px}
    .nav-links a:hover{color: var(--ink)}

    .btn{
      display:inline-flex; align-items:center; justify-content:center; gap:10px;
      padding:12px 16px; border-radius:999px;
      border:1px solid rgba(31,107,79,.20);
      background: linear-gradient(135deg, rgba(31,107,79,.10), rgba(240,209,132,.10));
      color: var(--ink); font-weight:950; cursor:pointer;
      transition: transform .12s ease, filter .12s ease;
    }
    .btn:hover{transform: translateY(-1px); filter: brightness(1.03)}
    .btn.dark{
      background: linear-gradient(135deg, rgba(31,107,79,.95), rgba(42,138,100,.95));
      border:1px solid rgba(31,107,79,.25);
      color:#fff;
    }
    .btn.secondary{
      background:#fff;
      border:1px solid var(--border);
      color: var(--ink);
    }

    /* HERO */
    .hero{
      padding:54px 0 18px;
      background:
        radial-gradient(900px 520px at 12% 10%, rgba(240,209,132,.22), transparent 55%),
        radial-gradient(800px 520px at 90% 20%, rgba(31,107,79,.14), transparent 55%),
        linear-gradient(180deg, #ffffff, #ffffff);
    }

    .hero-grid{display:grid; grid-template-columns: 1.15fr .85fr; gap:22px; align-items:stretch}

    .badge{
      display:inline-flex; gap:10px; align-items:center;
      padding:8px 12px; border-radius:999px;
      background: rgba(31,107,79,.08);
      border:1px solid rgba(31,107,79,.12);
      color: var(--green);
      font-weight:950; font-size:13px;
    }

    h1{
      margin:14px 0 10px;
      font-size: clamp(34px, 4.2vw, 54px);
      line-height:1.04;
      letter-spacing:-.02em;
    }
    .sub{
      color: var(--muted);
      line-height:1.65;
      font-size: clamp(15px, 1.35vw, 18px);
      margin:0 0 18px
    }
    .hero-actions{display:flex; gap:12px; flex-wrap:wrap; margin-top:12px}

    .stats{display:grid; grid-template-columns:repeat(3,1fr); gap:12px; margin-top:18px}
    .stat{
      padding:14px; border-radius: var(--radius);
      background: #fff;
      border:1px solid var(--border);
      box-shadow: var(--shadow);
    }
    .stat b{display:block; color: var(--green)}
    .stat span{display:block; color: var(--muted); font-size:13px; font-weight:750; margin-top:4px}

    .hero-card{
      padding:18px; border-radius: 22px;
      background: #fff;
      border:1px solid var(--border);
      box-shadow: var(--shadow);
    }
    .hero-card h3{margin:0 0 6px}
    .hero-card p{margin:0 0 12px; color: var(--muted); line-height:1.6}

    .field{display:grid; gap:6px; margin-bottom:10px; font-size:13px; font-weight:900; color: var(--muted)}
    input, select{
      width:100%; padding:12px 12px;
      border-radius: 14px;
      border:1px solid var(--border);
      background: #fff;
      color: var(--ink);
      outline:none; font-weight:850;
    }
    input::placeholder{color: rgba(71,85,105,.75)}

    section{padding:34px 0}
    .light{background: var(--paper)}
    .light.alt{background: var(--paper2)}

    .section-title{display:flex; justify-content:space-between; align-items:flex-end; gap:14px; margin-bottom:14px}
    .section-title h2{margin:0; font-size: clamp(22px, 2.4vw, 32px); letter-spacing:-.02em}

    .pill{
      display:inline-flex; padding:6px 10px; border-radius:999px;
      font-size:12px; font-weight:950; letter-spacing:.08em;
      border:1px solid rgba(215,179,95,.30);
      background: rgba(215,179,95,.14);
      color: #6a4e12;
      margin-bottom:10px;
    }

    .products{display:grid; grid-template-columns:repeat(3,1fr); gap:14px}
    .card{
      border-radius: var(--radius);
      background:#fff;
      border:1px solid var(--border);
      box-shadow: var(--shadow);
      padding:18px;
    }
    .card h3{margin:0 0 6px}
    .price{font-size:26px; font-weight:1000; color: var(--green2); margin:6px 0 10px}
    ul.list{margin:0; padding-left:18px; color: var(--muted); line-height:1.7}
    .product-actions{display:flex; gap:10px; flex-wrap:wrap; margin-top:14px}
    .btn.ghost{background:#fff; color: var(--green); border:1px solid rgba(31,107,79,.18);}

    /* BUILDER */
    .builder{display:grid; grid-template-columns: .92fr 1.08fr; gap:14px; align-items:start}
    .panel{border-radius: var(--radius); background:#fff; border:1px solid var(--border); box-shadow: var(--shadow); padding:18px;}
    .sizes{display:flex; gap:10px; flex-wrap:wrap}
    .chip{
      display:inline-flex; align-items:center; gap:8px;
      padding:10px 12px; border-radius:999px;
      border:1px solid rgba(31,107,79,.18);
      background:#fff; cursor:pointer;
      font-weight:950; color: var(--green); user-select:none
    }
    .chip.active{
      border-color: rgba(42,138,100,.45);
      box-shadow: 0 10px 18px rgba(2,6,23,.08);
      background: linear-gradient(180deg, rgba(31,107,79,.06), rgba(31,107,79,.02));
    }

    .inv-grid{display:grid; grid-template-columns:repeat(2,1fr); gap:10px; margin-top:12px}
    .item{
      border:1px solid rgba(31,107,79,.14);
      border-radius: 14px;
      padding:12px;
      display:grid; gap:8px;
      background:#fff
    }
    .item-top{display:flex; justify-content:space-between; gap:10px; align-items:start}
    .item b{color: var(--ink)}
    .item small{color: var(--muted); font-weight:850}

    .qty{display:flex; align-items:center; gap:8px}
    .qty button{
      width:34px; height:34px; border-radius:10px;
      border:1px solid rgba(31,107,79,.18);
      background:#fff; cursor:pointer;
      font-weight:1000; color: var(--green)
    }
    .qty button:disabled{opacity:.35; cursor:not-allowed}
    .qty span{min-width:26px; text-align:center; font-weight:1000; color: var(--green)}

    .notice{
      margin-top:10px; padding:10px 12px; border-radius: 14px;
      background: rgba(31,107,79,.08);
      border:1px solid rgba(31,107,79,.12);
      color: var(--muted);
      font-weight:900; line-height:1.5; font-size:13px
    }

    .summary{display:grid; gap:10px}
    .summary .row{display:flex; justify-content:space-between; gap:12px; font-weight:950; color: var(--ink)}
    .summary .row span{color: var(--muted); font-weight:950}
    .summary ul{margin:0; padding-left:18px; color: var(--muted); line-height:1.7}

    /* Zones */
    .grid-3{display:grid; grid-template-columns:repeat(3,1fr); gap:14px}
    .zoneCard{
      border-radius: var(--radius);
      background:#fff;
      border:1px solid var(--border);
      box-shadow: var(--shadow);
      padding:18px;
      display:flex; align-items:center; justify-content:space-between; gap:10px;
    }
    .zoneCard b{color: var(--green)}
    .zoneCard span{color: var(--muted); font-weight:900}

    /* FAQ */
    details{
      border-radius: var(--radius);
      background:#fff;
      border:1px solid var(--border);
      box-shadow: var(--shadow);
      padding:14px 16px;
    }
    details + details{margin-top:10px}
    summary{cursor:pointer; font-weight:1000; color: var(--ink)}
    details p{margin:10px 0 0; color: var(--muted); line-height:1.6}

    footer{
      padding:26px 0 40px;
      border-top:1px solid var(--border);
      background:#fff;
    }
    .footer-grid{display:grid; grid-template-columns:1.2fr .8fr; gap:14px}
    .footer-muted{color: var(--muted)}

    @media (max-width: 950px){
      .hero-grid{grid-template-columns:1fr}
      .stats{grid-template-columns:1fr}
      .nav-links{display:none}
      .products{grid-template-columns:1fr}
      .builder{grid-template-columns:1fr}
      .inv-grid{grid-template-columns:1fr}
      .grid-3{grid-template-columns:1fr}
      .footer-grid{grid-template-columns:1fr}
    }
  </style>
</head>

<body>
  <header class="nav">
    <div class="container nav-inner">
      <div class="brand">
        <div class="logoMark" aria-label="SALIFRESH logo">
          <!-- Elegant monogram: S + leaf -->
          <svg viewBox="0 0 64 64" width="44" height="44" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M40 18c-2.5-6-12-7-18-1-6 6-2 12 5 14 8 2 12 4 12 9 0 6-10 10-18 3" stroke="rgba(31,107,79,.95)" stroke-width="3.2" stroke-linecap="round"/>
            <path d="M39 14c7-1 12 2 13 8-7 1-12-2-13-8Z" fill="rgba(240,209,132,.55)" stroke="rgba(215,179,95,.90)" stroke-width="1.4"/>
          </svg>
        </div>
        <div>
          <div class="name">SALIFRESH</div>
          <div class="tag">Fresh Fruit, No Compromise</div>
        </div>
      </div>

      <nav class="nav-links">
        <a href="#cajas">Boxes</a>
        <a href="#arma">Premium Personalizable</a>
        <a href="#zonas">Zonas</a>
        <a href="#faq">FAQ</a>
      </nav>

      <a class="btn dark" id="ctaTop" href="#">Pedir por WhatsApp</a>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="container hero-grid">
        <div>
          <div class="badge">ðŸšš Metepec y Toluca Centro</div>
          <h1>Fruta fresca, selecciÃ³n premium.</h1>
          <p class="sub">
            Boxes listas y opciÃ³n premium personalizable para elegir productos y kilos.
            <b>Para hogar o negocio.</b>
          </p>

          <div class="hero-actions">
            <a class="btn dark" id="ctaHero" href="#">Pedir ahora</a>
            <a class="btn secondary" href="#arma">Premium personalizable</a>
          </div>

          <div class="stats">
            <div class="stat"><b>SelecciÃ³n premium</b><span>Calidad y frescura</span></div>
            <div class="stat"><b>Simple</b><span>Pedido por WhatsApp</span></div>
            <div class="stat"><b>Hogar o negocio</b><span>Entregas programadas</span></div>
          </div>
        </div>

        <aside class="hero-card" id="pedido">
          <h3>Pedido rÃ¡pido</h3>
          <p>Te abrimos WhatsApp con el mensaje listo.</p>

          <label class="field">Tu nombre
            <input id="name" placeholder="Ej. Diego" />
          </label>

          <label class="field">Zona
            <select id="zone">
              <option value="Metepec">Metepec</option>
              <option value="Toluca Centro">Toluca Centro</option>
            </select>
          </label>

          <label class="field">Â¿QuÃ© quieres pedir?
            <select id="quickPick">
              <option value="Box Esencial">Box Esencial</option>
              <option value="Box Balance">Box Balance</option>
              <option value="Premium Personalizable">Premium Personalizable</option>
            </select>
          </label>

          <label class="field">DirecciÃ³n (opcional)
            <input id="address" placeholder="Calle, colonia (opcional)" />
          </label>

          <button class="btn dark" id="sendQuick" type="button">Enviar por WhatsApp</button>
        </aside>
      </div>
    </section>

    <section class="light" id="cajas">
      <div class="container">
        <div class="section-title">
          <div><h2>Boxes</h2></div>
        </div>

        <div class="products">
          <div class="card">
            <div class="pill">ESENCIAL</div>
            <h3>Box Esencial</h3>
            <div class="price">$229</div>
            <ul class="list">
              <li>PlÃ¡tano</li>
              <li>Manzana</li>
              <li>Mandarina</li>
              <li>MelÃ³n (cambiable)</li>
            </ul>
            <div class="product-actions">
              <a class="btn ghost" href="#pedido" data-pick="Box Esencial">Elegir</a>
              <a class="btn dark" href="#" data-order="Box Esencial">Pedir</a>
            </div>
          </div>

          <div class="card">
            <div class="pill">BALANCE</div>
            <h3>Box Balance</h3>
            <div class="price">$329</div>
            <ul class="list">
              <li>PlÃ¡tano</li>
              <li>Manzana</li>
              <li>Mandarina</li>
              <li>MelÃ³n (cambiable)</li>
              <li>Pera (opcional)</li>
            </ul>
            <div class="product-actions">
              <a class="btn ghost" href="#pedido" data-pick="Box Balance">Elegir</a>
              <a class="btn dark" href="#" data-order="Box Balance">Pedir</a>
            </div>
          </div>

          <div class="card">
            <div class="pill">PREMIUM</div>
            <h3>Premium Personalizable</h3>
            <div class="price">TÃº eliges</div>
            <ul class="list">
              <li>Escoge productos</li>
              <li>Escoge kilos</li>
              <li>Confirmas y pides</li>
            </ul>
            <div class="product-actions">
              <a class="btn ghost" href="#arma" id="goPremiumBuilder">Personalizar</a>
              <a class="btn dark" href="#" id="orderPremiumBuilder">Pedir</a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="light alt" id="arma">
      <div class="container">
        <div class="section-title">
          <div><h2>Premium Personalizable</h2></div>
        </div>

        <div class="builder">
          <div class="panel">
            <div class="pill">TAMAÃ‘O</div>
            <div class="sizes" id="sizes"></div>
            <div class="notice" id="sizeNote"></div>

            <div style="margin-top:14px">
              <div class="pill">INVENTARIO</div>
              <div class="inv-grid" id="inventory"></div>
            </div>
          </div>

          <div class="panel">
            <div class="pill">RESUMEN</div>
            <div class="summary">
              <div class="row"><div>TamaÃ±o</div><span id="sumSize">â€”</span></div>
              <div class="row"><div>Peso objetivo</div><span id="sumTarget">â€”</span></div>
              <div class="row"><div>Peso seleccionado</div><span id="sumWeight">0 kg</span></div>
              <div class="row"><div>Base</div><span id="sumBase">$0</span></div>
              <div class="row"><div>Extras premium</div><span id="sumExtras">$0</span></div>
              <hr style="border:none; border-top:1px solid var(--border)">

              <div class="row" style="font-size:18px"><div>Total estimado</div><span id="sumTotal">$0</span></div>

              <div>
                <ul id="sumList"></ul>
              </div>

              <button class="btn dark" id="sendCustom" type="button">Confirmar y pedir por WhatsApp</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="zonas">
      <div class="container">
        <div class="section-title">
          <div><h2>Zonas de entrega</h2></div>
        </div>

        <div class="grid-3">
          <div class="zoneCard"><b>Toluca Centro</b><span>Disponible</span></div>
          <div class="zoneCard"><b>Metepec</b><span>Disponible</span></div>
          <div class="zoneCard"><b>PolÃ­tica simple</b><span>Gratis desde $299 â€¢ EnvÃ­o $25</span></div>
        </div>
      </div>
    </section>

    <section class="light" id="faq">
      <div class="container">
        <div class="section-title"><div><h2>FAQ</h2></div></div>
        <details><summary>Â¿Puedo cambiar una fruta dentro de un box?</summary><p>SÃ­. Si no te gusta un producto (por ejemplo melÃ³n), lo puedes cambiar por una opciÃ³n disponible del mismo grupo.</p></details>
        <details><summary>Â¿CÃ³mo manejan frutas de temporada?</summary><p>Al confirmar por WhatsApp te decimos quÃ© estÃ¡ disponible hoy.</p></details>
        <details><summary>Â¿QuÃ© pasa si una fruta no sale buena?</summary><p>Te ayudamos con reemplazo. Queremos que compres con confianza.</p></details>
      </div>
    </section>

    <section>
      <div class="container">
        <div class="hero-card" style="display:flex; align-items:center; justify-content:space-between; gap:14px; flex-wrap:wrap;">
          <div>
            <h3 style="margin:0 0 6px">Pide por WhatsApp</h3>
          </div>
          <a class="btn dark" id="ctaBottom" href="#">Pedir</a>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container footer-grid">
      <div>
        <div style="color:var(--green); font-weight:1000; letter-spacing:.12em;">SALIFRESH</div>
        <div class="footer-muted" style="margin-top:8px;">Metepec â€¢ Toluca Centro</div>
      </div>
      <div>
        <div style="font-weight:1000;">Contacto</div>
        <div style="margin-top:10px; display:flex; gap:10px; flex-wrap:wrap;">
          <a class="btn secondary" id="ctaFooter" href="#">WhatsApp</a>
          <a class="btn secondary" href="#arma">Premium Personalizable</a>
        </div>
        <div class="footer-muted" style="margin-top:12px; font-size:12px;">Â© <span id="year"></span> SALIFRESH.</div>
      </div>
    </div>
  </footer>

  <script>
    // âœ… SET YOUR NUMBER: 52 + nÃºmero (ej: 5217221234567)
    const WHATSAPP_NUMBER = "5210000000000";

    function waLink(message){
      return "https://wa.me/" + WHATSAPP_NUMBER + "?text=" + encodeURIComponent(message);
    }

    function basicMessage(kind){
      const name = (document.getElementById("name").value || "").trim();
      const zone = document.getElementById("zone").value;
      const address = (document.getElementById("address").value || "").trim();
      let msg = `Hola SALIFRESH ðŸ‘‹\n\n`;
      if(name) msg += `Soy ${name}.\n`;
      msg += `Quiero pedir: *${kind}*\n`;
      msg += `Zona: *${zone}*\n`;
      if(address) msg += `DirecciÃ³n/Referencia: ${address}\n`;
      msg += `\nÂ¿Me confirmas disponibilidad y horario de entrega?`;
      return msg;
    }

    function attachCTA(id, kind=null){
      const el = document.getElementById(id);
      if(!el) return;
      el.addEventListener("click", (e)=>{
        e.preventDefault();
        const pick = kind || document.getElementById("quickPick").value;
        if(pick === "Premium Personalizable"){
          document.getElementById("arma").scrollIntoView({behavior:"smooth", block:"start"});
          return;
        }
        window.open(waLink(basicMessage(pick)), "_blank");
      });
    }

    attachCTA("ctaTop");
    attachCTA("ctaHero");
    attachCTA("ctaBottom");
    attachCTA("ctaFooter");

    document.getElementById("sendQuick").addEventListener("click", ()=>{
      const pick = document.getElementById("quickPick").value;
      if(pick === "Premium Personalizable"){
        document.getElementById("arma").scrollIntoView({behavior:"smooth", block:"start"});
        return;
      }
      window.open(waLink(basicMessage(pick)), "_blank");
    });

    document.querySelectorAll("[data-order]").forEach(btn=>{
      btn.addEventListener("click",(e)=>{
        e.preventDefault();
        window.open(waLink(basicMessage(btn.getAttribute("data-order"))), "_blank");
      });
    });

    document.querySelectorAll("[data-pick]").forEach(btn=>{
      btn.addEventListener("click",(e)=>{
        e.preventDefault();
        document.getElementById("quickPick").value = btn.getAttribute("data-pick");
        document.getElementById("pedido").scrollIntoView({behavior:"smooth", block:"start"});
      });
    });

    // Premium card buttons
    document.getElementById("goPremiumBuilder").addEventListener("click", (e)=>{
      e.preventDefault();
      document.getElementById("arma").scrollIntoView({behavior:"smooth", block:"start"});
      // Optionally default to L
      setSizeById("L");
    });
    document.getElementById("orderPremiumBuilder").addEventListener("click", (e)=>{
      e.preventDefault();
      document.getElementById("arma").scrollIntoView({behavior:"smooth", block:"start"});
      setSizeById("L");
    });

    // ==== Premium Personalizable builder (editable) ====
    const sizes = [
      { id:"S", label:"Box S", targetKg:5, base:229 },
      { id:"M", label:"Box M", targetKg:8, base:329 },
      { id:"L", label:"Box L", targetKg:12, base:599 },
    ];

    // âœ… Edit inventory here (available: true/false)
    const inventory = [
      { key:"platano", name:"PlÃ¡tano", unit:"1 kg", weightKg:1.0, premium:false, extra:0, available:true },
      { key:"mandarina", name:"Mandarina", unit:"1 kg", weightKg:1.0, premium:false, extra:0, available:true },
      { key:"manzana", name:"Manzana (nacional)", unit:"1 kg", weightKg:1.0, premium:false, extra:0, available:true },
      { key:"melon", name:"MelÃ³n", unit:"1 pza", weightKg:1.0, premium:false, extra:0, available:true },

      { key:"pera", name:"Pera", unit:"1 kg", weightKg:1.0, premium:true, extra:25, available:true },
      { key:"uva_roja", name:"Uva roja", unit:"1 bolsa", weightKg:0.5, premium:true, extra:35, available:true },
      { key:"uva_verde", name:"Uva verde", unit:"1 bolsa", weightKg:0.5, premium:true, extra:60, available:true },
      { key:"kiwi", name:"Kiwi", unit:"1 kg", weightKg:1.0, premium:true, extra:70, available:true },

      { key:"fresa", name:"Fresa", unit:"1 domo", weightKg:0.25, premium:true, extra:45, available:true },
      { key:"zarzamora", name:"Zarzamora", unit:"1 domo", weightKg:0.17, premium:true, extra:40, available:true },
      { key:"blueberry", name:"Blueberry", unit:"1 domo", weightKg:0.17, premium:true, extra:40, available:true },
      { key:"frambuesa", name:"Frambuesa", unit:"1 domo", weightKg:0.17, premium:true, extra:45, available:true },
    ];

    const state = { size: sizes[0], qty: Object.fromEntries(inventory.map(i => [i.key, 0])) };
    const $ = (id)=>document.getElementById(id);
    const money = (n)=>"$" + Number(n).toFixed(0);

    function setSizeById(id){
      const found = sizes.find(s=>s.id===id);
      if(found){
        state.size = found;
        renderSizes();
        renderSummary();
      }
    }

    function renderSizes(){
      const wrap = $("sizes");
      wrap.innerHTML = "";
      sizes.forEach(s=>{
        const el = document.createElement("div");
        el.className = "chip" + (state.size.id === s.id ? " active" : "");
        el.innerHTML = `<span style="font-weight:1000">${s.label}</span><span style="color:var(--muted); font-weight:950">${s.targetKg} kg</span>`;
        el.onclick = ()=>{ state.size = s; renderSizes(); renderSummary(); };
        wrap.appendChild(el);
      });
      $("sizeNote").textContent = `Base ${money(state.size.base)} â€¢ Objetivo ${state.size.targetKg} kg`;
    }

    function renderInventory(){
      const wrap = $("inventory");
      wrap.innerHTML = "";
      inventory.forEach(item=>{
        const el = document.createElement("div");
        el.className = "item";
        const avail = item.available ? "" : " (no disponible)";
        const priceTag = item.premium ? `+${money(item.extra)} extra` : "incluido";
        el.innerHTML = `
          <div class="item-top">
            <div>
              <b>${item.name}${avail}</b><br/>
              <small>${item.unit} â€¢ ${priceTag}</small>
            </div>
            <div class="qty">
              <button ${item.available ? "" : "disabled"} data-k="${item.key}" data-d="-1">âˆ’</button>
              <span id="q_${item.key}">0</span>
              <button ${item.available ? "" : "disabled"} data-k="${item.key}" data-d="1">+</button>
            </div>
          </div>
        `;
        wrap.appendChild(el);
      });

      wrap.querySelectorAll("button[data-k]").forEach(btn=>{
        btn.addEventListener("click", ()=>{
          const k = btn.getAttribute("data-k");
          const d = Number(btn.getAttribute("data-d"));
          state.qty[k] = Math.max(0, (state.qty[k] || 0) + d);
          $("q_"+k).textContent = state.qty[k];
          renderSummary();
        });
      });
    }

    function calc(){
      let weight = 0;
      let extras = 0;
      const lines = [];
      inventory.forEach(i=>{
        const q = state.qty[i.key] || 0;
        if(q > 0){
          weight += q * i.weightKg;
          if(i.premium) extras += q * i.extra;
          lines.push({ name:i.name, q, unit:i.unit, premium:i.premium, extra:i.extra });
        }
      });
      return { weight, extras, total: state.size.base + extras, lines };
    }

    function renderSummary(){
      const { weight, extras, total, lines } = calc();
      $("sumSize").textContent = state.size.label;
      $("sumTarget").textContent = state.size.targetKg + " kg";
      $("sumWeight").textContent = weight.toFixed(1) + " kg";
      $("sumBase").textContent = money(state.size.base);
      $("sumExtras").textContent = money(extras);
      $("sumTotal").textContent = money(total);

      const ul = $("sumList");
      ul.innerHTML = "";
      if(lines.length === 0){
        ul.innerHTML = "<li>Selecciona productos y kilos.</li>";
      } else {
        lines.forEach(l=>{
          const li = document.createElement("li");
          const extraText = l.premium ? ` â€¢ +${money(l.q*l.extra)} extra` : "";
          li.textContent = `${l.q}Ã— ${l.name} (${l.unit})${extraText}`;
          ul.appendChild(li);
        });
      }
    }

    function customMessage(){
      const name = (document.getElementById("name").value || "").trim();
      const zone = document.getElementById("zone").value;
      const address = (document.getElementById("address").value || "").trim();
      const { weight, extras, total, lines } = calc();

      let msg = `Hola SALIFRESH ðŸ‘‹\n\n`;
      if(name) msg += `Soy ${name}.\n`;
      msg += `Quiero *Premium Personalizable*\n`;
      msg += `TamaÃ±o: *${state.size.label}* (objetivo ${state.size.targetKg} kg)\n`;
      msg += `Peso seleccionado: *${weight.toFixed(1)} kg*\n`;
      msg += `Zona: *${zone}*\n`;
      if(address) msg += `DirecciÃ³n/Referencia: ${address}\n`;

      msg += `\nSelecciÃ³n:\n`;
      if(lines.length === 0){ msg += `- (sin selecciÃ³n)\n`; }
      else { lines.forEach(l=>{ msg += `- ${l.q}Ã— ${l.name} (${l.unit})${l.premium ? ` + extra` : ""}\n`; }); }

      msg += `\nBase: ${money(state.size.base)}\n`;
      msg += `Extras: ${money(extras)}\n`;
      msg += `Total estimado: *${money(total)}*\n`;
      msg += `\nÂ¿Me confirmas disponibilidad y horario de entrega?`;
      return msg;
    }

    document.getElementById("sendCustom").addEventListener("click", ()=>{
      window.open(waLink(customMessage()), "_blank");
    });

    // Init
    renderSizes();
    renderInventory();
    renderSummary();
    document.getElementById("year").textContent = new Date().getFullYear();
  </script>
</body>
</html>
